<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="dist/output.css" />
    <title>Tailwindcss</title>
  </head>
  <body class="bg-slate-200">
    <div class="container mx-auto">
      <!-- <table class="table-auto border-separate">
        <thead>
          <tr>
            <th rowspan="2" class="p-2 bg-slate-400">Nume task</th>
            <th rowspan="2" class="p-2 bg-slate-400">Durata</th>
            <th rowspan="2" class="p-2 bg-slate-400">Data start</th>
            <th rowspan="2" class="p-2 bg-slate-400">Data finalizare</th>
            <th rowspan="2" class="p-2 bg-slate-400">Owner</th>
            <th colspan="5" class="p-2 bg-slate-400">Mai 15</th>
            <th colspan="5" class="p-2 bg-slate-400">Mai 22</th>
          </tr>
          <tr>
            <th class="p-2 bg-slate-400">L</th>
            <th class="p-2 bg-slate-400">M</th>
            <th class="p-2 bg-slate-400">M</th>
            <th class="p-2 bg-slate-400">J</th>
            <th class="p-2 bg-slate-400">V</th>
            <th class="p-2 bg-slate-400">L</th>
            <th class="p-2 bg-slate-400">M</th>
            <th class="p-2 bg-slate-400">M</th>
            <th class="p-2 bg-slate-400">J</th>
            <th class="p-2 bg-slate-400">V</th>
          </tr>
        </thead>
        <tbody class="text-sm">
          <tr class="bg-white">
            <td>Initiating</td>
            <td>12</td>
            <td>1/21</td>
            <td colspan="100%">2/2</td>
          </tr>
          <tr class="bg-slate-300">
            <td class="px-4">Identiy objective</td>
            <td>4</td>
            <td>1/21</td>
            <td>1,23</td>
            <td>Taylor</td>
            <td class="p-2 bg-slate-400"></td>
            <td class="p-2 bg-slate-400"></td>
            <td class="p-2 bg-slate-400"></td>
            <td class="p-2 bg-slate-400"></td>
            <td class="p-2 bg-slate-400"></td>
            <td class="p-2 bg-slate-400"></td>
            <td class="p-2 bg-slate-400"></td>
            <td class="p-2 bg-slate-400"></td>
            <td class="p-2 bg-slate-400"></td>
            <td class="p-2 bg-slate-400"></td>
          </tr>
        </tbody>
      </table> -->
    </div>
    <script>
      const dataTable = {
        headerItems: ['Task name', 'Duration', 'Start date', 'Finish date', 'Owner'],
        rows: [
          {
            title: true,
            name: 'Initiating',
            duration: 0,
            startDate: 0,
            endDate: 0,
            owner: '',
            month: []
          },
          {
            title: false,
            name: 'Identify objective',
            duration: 0,
            startDate: 0,
            endDate: 0,
            owner: 'Gigi',
            month: ['', 'red', '', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'yellow']
          },
          {
            title: false,
            name: 'Determine project feasibility',
            duration: 0,
            startDate: 0,
            endDate: 0,
            owner: 'Gigi',
            month: ['red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'yellow']
          },
          {
            title: false,
            name: 'Identify stakeholders',
            duration: 0,
            startDate: 0,
            endDate: 0,
            owner: 'Gigi',
            month: ['red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'yellow']
          },
          {
            title: false,
            name: 'Determine scope',
            duration: 0,
            startDate: 0,
            endDate: 0,
            owner: 'Gigi',
            month: ['red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'yellow']
          },
          {
            title: false,
            name: 'Sign project charter',
            duration: 0,
            startDate: 0,
            endDate: 0,
            owner: 'Gigi',
            month: ['red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'red', 'yellow']
          }
        ]
      }

      class MyCell extends HTMLElement {
        constructor() {
          super()
        }
        connectedCallback() {}
      }

      class MyTable extends HTMLElement {
        constructor() {
          super()
        }
        connectedCallback() {
          let year = this.getAttribute('year')
          let month = this.getAttribute('month')

          let dayCells = []
          let d = new Date(year, month)

          let monthHeader = `${d.toLocaleDateString('RO', { month: 'long' })} ${d.getFullYear()}`

          while (d.getMonth() == month) {
            // if (!(d.getDay() == 6 || d.getDay() == 0)) {
            dayCells.push(d.getDate())
            // }
            d.setDate(d.getDate() + 1)
          }

          let myTable = document.createElement('table')
          myTable.className = 'table-auto border-separate'

          let myTableHead = document.createElement('thead')

          let myTableHeadRow = document.createElement('tr')

          for (let j = dataTable.headerItems.length, i = 0; i < j; i++) {
            let th = document.createElement('th')
            th.className = 'p-2 bg-slate-400'
            th.setAttribute('rowspan', '2')
            th.appendChild(document.createTextNode(dataTable.headerItems[i]))
            myTableHeadRow.appendChild(th)
          }

          let th = document.createElement('th')
          th.className = 'p-2 bg-slate-400'
          th.setAttribute('colspan', `${dayCells.length}`)
          th.appendChild(document.createTextNode(monthHeader))
          myTableHeadRow.appendChild(th)
          myTableHead.appendChild(myTableHeadRow)

          myTableHeadRow = document.createElement('tr')
          for (let j = dayCells.length, i = 0; i < j; i++) {
            let th = document.createElement('th')
            th.className = 'p-2 bg-slate-400'
            th.appendChild(document.createTextNode(dayCells[i]))
            myTableHeadRow.appendChild(th)
          }
          myTableHead.appendChild(myTableHeadRow)

          myTable.appendChild(myTableHead)

          let myTableBody = document.createElement('tbody')
          myTableBody.className = 'text-sm'

          for (let j = dataTable.rows.length, i = 0; i < j; i++) {
            let tableBodyRow = document.createElement('tr')
            tableBodyRow.className = i % 2 == 0 ? 'bg-white' : 'bg-slate-300'
            let td = document.createElement('td')
            td.appendChild(document.createTextNode(dataTable.rows[i].name))
            td.className = dataTable.rows[i].title ? 'font-bold' : 'px-4'
            tableBodyRow.appendChild(td)
            td = document.createElement('td')
            td.className = dataTable.rows[i].title ? '' : ''
            td.appendChild(document.createTextNode(dataTable.rows[i].duration))
            tableBodyRow.appendChild(td)
            td = document.createElement('td')
            td.appendChild(document.createTextNode(dataTable.rows[i].startDate))
            tableBodyRow.appendChild(td)
            td = document.createElement('td')
            td.appendChild(document.createTextNode(dataTable.rows[i].endDate))
            tableBodyRow.appendChild(td)
            td = document.createElement('td')
            td.appendChild(document.createTextNode(dataTable.rows[i].owner))
            tableBodyRow.appendChild(td)
            if (dataTable.rows[i].title) {
              td = document.createElement('td')
              td.setAttribute('colspan', '100%')
              tableBodyRow.appendChild(td)
            } else {
              dataTable.rows[i].month.forEach((item, index) => {
                td = document.createElement('td')
                td.className = `bg-${item}-500 cursor-pointer`
                td.setAttribute('data-index', index)
                td.setAttribute('data-color', item)
                tableBodyRow.appendChild(td)
              })
            }
            tableBodyRow.addEventListener('click', e => {
              console.log(e.target.dataset.color == '' ? 'no color' : e.target.dataset.color)
            })
            myTableBody.appendChild(tableBodyRow)
          }

          myTable.appendChild(myTableBody)

          this.appendChild(myTable)
        }
      }

      customElements.define('my-table', MyTable)
      let myTable = document.createElement('my-table')
      myTable.setAttribute('year', '2023')
      myTable.setAttribute('month', '4')
      document.body.appendChild(myTable)
    </script>
  </body>
</html>
